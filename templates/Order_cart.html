<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Now || Foodie Club</title>
    {% load static %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400|Nunito:600,700" rel="stylesheet"> 
    
    <style>
        body {
            color: black;
            margin: 0;
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, rgba(221, 227, 220, 0.8), rgba(245, 167, 57, 0.947));
        }
        
        .btn-primary {
            background-color: #1e6905;
            border: none;
        }
        
        .offcanvas {
            z-index: 10000;
            position: fixed;
        }
        
        .offcanvas-header {
            margin-top: 10%;
        }
        
        .items {
            display: flex;
            justify-content: center;
            align-items: start;
            margin-top: 1%;
            padding: 2%;
        }
        
        .navbar .navbar-brand {
            margin: 0;
            color: #fbaf32;
            font-size: 35px;
            line-height: 0px;
            font-weight: 700;
            font-family: 'Nunito', sans-serif;
            transition: .5s;
        }

        .navbar .navbar-brand span {
            color: #128408;
        }

        .navbar .navbar-brand:hover {
            color: #fbaf32;
        }

        .navbar .navbar-brand:hover span {
            color: #fbaf32;
        }

        /* Menu and Cart layout */
        .menu-container {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-top: 2%;
        }

        .menu-list {
            flex: 3;
            padding: 20px;
            border-radius: 8px;
            background-color: #fff;
            height: 80vh;
            overflow-y: auto;
        }

        .menu-item {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            padding: 10px;
            border-radius: 8px;
        }

        .menu-item img {
            max-width: 100px;
            max-height: 100px;
            border-radius: 8px;
            object-fit: cover;
        }

        .menu-item .details {
            flex-grow: 1;
        }

        .cart {
            flex: 2;
            padding: 20px;
            border-radius: 8px;
            background-color: #fff;
            height: 80vh;
            overflow-y: auto;
        }

        .cart ul {
            list-style: none;
            padding: 0;
        }

        .cart ul li {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .cart button {
            background-color: #128408;
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
        }
        /* Quantity Control Styling */
        .quantity-control {
            display: flex;
            align-items: center; /* Vertically center the buttons and input */
            justify-content: center; /* Center align the whole control */
        }

        .quantity-control input {
            width: 50px; /* Fix the width of the input box */
            text-align: center; /* Center the text inside the input */
            margin: 0 10px; /* Add margin to the left and right of the input */
        }

        .quantity-control button {
            padding: 5px 15px; /* Uniform button padding */
            font-size: 1.2em; /* Increase the font size for better readability */
        }

        .quantity-control button.btn-sm {
            padding: 5px 12px; /* Smaller padding for buttons with 'btn-sm' */
            font-size: 1em; /* Standardize font size */
        }

        .quantity-control .btn-outline-secondary {
            border-color: #6c757d; /* Border color */
            color: #6c757d; /* Text color */
        }

        .quantity-control .btn-outline-secondary:hover {
            background-color: #6c757d;
            color: #fff;
        }

    </style>
</head>
<body>
    <!-- Nav Bar Start -->
    <div class="navbar navbar-expand-lg bg-light navbar-light">
        <div class="container-fluid">
            <a class="btn btn-primary navbar-brand" data-bs-toggle="offcanvas" href="#offcanvasExample" role="button" aria-controls="offcanvasExample"><i class="bi bi-list" style="color: white;"></i></a>    
            <a href="/" class="navbar-brand">Foodie <span>Club</span></a>
            <a href="/cart"><button type="button" class="btn btn-primary">Go to Cart</button></a>
        </div>  
    </div>
    <!-- Nav Bar End -->

    <!--Offcanvas Start-->
    <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
        <div class="offcanvas-header">
            <h3 class="offcanvas-title" id="offcanvasExampleLabel" style="color: rgb(138, 71, 5);">Dashboard</h3>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <div>
                <a href="/cus_home/" style="text-decoration: none;"><div class="items"><h5 style="color: rgb(138, 71, 5);">Home</h5></div></a>
                <hr style="margin: auto;">
                <a href="/my_profile/" style="text-decoration: none;"><div class="items"><h5 style="color: rgb(138, 71, 5);">My Profile</h5></div></a>
                <hr style="margin: auto;">
                <a href="/view_orders_cus/" style="text-decoration: none;"><div class="items"><h5 style="color: rgb(138, 71, 5);">View Orders</h5></div></a>
                <hr style="margin: auto;">
                <a href="/feedback_cus/" style="text-decoration: none;"><div class="items"><h5 style="color: rgb(138, 71, 5);">Feedback</h5></div></a>
            </div> 
        </div>        
    </div>
    <!--Offcanvas Ends-->

    <!-- Body Starts -->
    <div class="container menu-container">
        <!-- Menu List -->
        <div class="menu-list">
            <h2 style="text-align: center;">Menu</h2>
            <div id="menu-items">
                <!-- Static Menu Items -->
                <div class="menu-item">
                    <img src="{% static 'momo.jpg' %}" alt="Food Item">
                    <div class="details">
                        <h5>Stream Momo</h5>
                        <p>Filled with a savory mixture of minced meat or vegetables, wrapped in a thin dough and steamed to perfection, served with a tangy dipping sauce.</p>
                        <p><b><i class="bi bi-currency-rupee"></i>70.00</b></p>
                        <button class="btn btn-success add-to-cart" data-name="Stream Momo" data-price="70.00">Add to Cart</button>
                    </div>
                    <div class="quantity-control d-flex align-items-center">
                        <button class="btn btn-outline-secondary" onclick="decreaseQuantity()">-</button>
                        <input type="number" value="1" min="1" id="quantity" onchange="updateTotal()" class="mx-2" style="width: 50px; text-align: center;">
                        <button class="btn btn-outline-secondary" onclick="increaseQuantity()">+</button>
                    </div>                    
                </div>
                
                <!-- More menu items can go here -->
            </div>
        </div>

        <!-- Cart Section -->
        <div class="cart">
            <h2 style="text-align: center;">Your Cart</h2>
            <ul id="cart-items">
                <!-- Cart items will appear here dynamically -->
            </ul>
            <button class="btn btn-success" style="width: 100%;" onclick="checkout()">Checkout</button>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        //quantity adder
        function updateTotal() {
            const quantity = document.getElementById("quantity").value;
            const price = 8.99; // Example price (could be dynamically loaded)
            const total = quantity * price;
            document.getElementById("total-price").innerText = total.toFixed(2);
            document.getElementById("total-items").innerText = quantity;
        }

        function increaseQuantity() {
            let quantity = document.getElementById("quantity");
            quantity.value = parseInt(quantity.value) + 1;
            updateTotal();
        }

        function decreaseQuantity() {
            let quantity = document.getElementById("quantity");
            if (quantity.value > 1) {
                quantity.value = parseInt(quantity.value) - 1;
                updateTotal();
            }
        }
        //cart
        const cart = [];
        function addToCart(name, price) {
            const item = cart.find(item => item.name === name);
            if (item) {
                item.quantity++;
            } else {
                cart.push({ name, price, quantity: 1 });
            }
            renderCart();
        }

        function renderCart() {
            const cartItemsList = document.getElementById('cart-items');
            cartItemsList.innerHTML = '';
            let total = 0;
            cart.forEach(item => {
                const li = document.createElement('li');
                li.classList.add('d-flex', 'justify-content-between', 'align-items-center');
                li.innerHTML = `
                    <span>${item.name} x${item.quantity}</span>
                    <span><i class="bi bi-currency-rupee"></i> ${item.price * item.quantity}</span>
                    <button class="btn btn-danger btn-sm" onclick="removeItem('${item.name}')">Remove</button>
                `;
                cartItemsList.appendChild(li);
                total += item.price * item.quantity;
            });
            const checkoutButton = document.querySelector('.cart button');
            checkoutButton.innerHTML = `Checkout - <i class="bi bi-currency-rupee"></i> ${total.toFixed(2)}`;
        }

        function removeItem(name) {
            const index = cart.findIndex(item => item.name === name);
            if (index !== -1) {
                cart.splice(index, 1);
            }
            renderCart();
        }

        function updateQuantity(name, delta) {
            const item = cart.find(item => item.name === name);
            if (item) {
                item.quantity += delta;
                if (item.quantity < 1) item.quantity = 1; // Prevent negative quantity
                renderCart();
            }
        }

        document.querySelectorAll('.add-to-cart').forEach(button => {
            button.addEventListener('click', function() {
                const name = this.dataset.name;
                const price = parseFloat(this.dataset.price);
                addToCart(name, price);
            });
        });

        function checkout() {
            alert('Proceeding to checkout');
        }
    </script>
</body>
</html>
